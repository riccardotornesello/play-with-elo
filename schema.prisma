// schema.prisma

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = "file:data/dev.db"
}

model Match {
    id        String   @id @default(cuid())
    playedAt  DateTime @default(now())
    createdAt DateTime @default(now())

    homePlayerId String
    awayPlayerId String

    homeScore Int @default(0)
    awayScore Int @default(0)

    homeTeamId Int?
    awayTeamId Int?

    homePointsDifference Float @default(0)
    awayPointsDifference Float @default(0)

    homePlayer User @relation("home_matches", fields: [homePlayerId], references: [id])
    awayPlayer User @relation("away_matches", fields: [awayPlayerId], references: [id])
}

model User {
    id           String  @id @default(cuid())
    username     String  @unique
    passwordHash String?
    passwordSalt String?

    elo Float @default(1500)

    isPlayer Boolean @default(false)
    isAdmin  Boolean @default(false)

    homeMatches Match[] @relation("home_matches")
    awayMatches Match[] @relation("away_matches")
}
